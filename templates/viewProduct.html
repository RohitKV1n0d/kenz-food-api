{% extends "base.html" %}


{% block content %}
<div class="container">
   
        <h1>All Products</h1>
        <div class="row">
            
                
    
                <div class="card shadow mb-4">
                    <div class="card-header py-3">
                        
                        <a href="{{url_for('addProduct')}}" class="btn btn-success" style="text-align: right;">Add</a>
                    </div>
                    <div class="card-body" >
                        <div class="table-responsive"  >
                            <table class="table table-bordered" id="dataTable" width="100%" cellspacing="0">
                                <thead>
                                    <tr>
                                        <th>Name</th>
                                        <th>Name(Arabic)</th>
                                        <th>Image</th>
                                        <th>Category</th>
                                        <th>Subcategory</th>
                                        <th>Description</th>
                                        <th>Description(Arabic)</th>
                                        <th>Unit</th>
                                        <th>Unit Quantity</th>
                                        <th>product_price</th>
                                        <th>product_offer_price</th>
                                        <th>product_purchase_price</th>
                                        <th>opening_stock</th>
                                        <th>min_stock</th>
                                        <th>max_stock</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tfoot>
                                    <tr>
                                        <th>Name</th>
                                        <th>Name(Arabic)</th>
                                        <th>Image</th>
                                        <th>Category</th>
                                        <th>Subcategory</th>
                                        <th>Description</th>
                                        <th>Description(Arabic)</th>
                                        <th>Unit</th>
                                        <th>Unit Quantity</th>
                                        <th>product_price</th>
                                        <th>product_offer_price</th>
                                        <th>product_purchase_price</th>
                                        <th>opening_stock</th>
                                        <th>min_stock</th>
                                        <th>max_stock</th>
                                        <th>Actions</th>
                                    </tr>
                                </tfoot>
                                <tbody>
                                    
                                    {% for product in prod %}
                                    <tr>
                                        <td>{{product.product_name_en}}</td>
                                        <td>{{product.product_name_ar}}</td>
                                        <td>
                                                {% for image in prod_img %}
                                                    {% if image.fk_product_id == product.id %}
                                                        <img src="{{image.product_image_url}}" width="70px" style="margin: 1px;">
                                                        
                                                    {% endif %}
                                                {% endfor %}
                                            
                                        </td>
                                        <td><a href="{{url_for('viewProductSubCategory', id=product.product.id, name=product.product.category_name_en)}}">{{product.product.category_name_en}}</a></td> 
                                        <td><a href="{{url_for('viewSubcatOnlyProducts', id=product.product.id)}}">{{product.products.subcategory_name_en}}</a></td>
                                        <td>{{product.product_desc_en}}</td>
                                        <td>{{product.product_desc_ar}}</td>
                                        <td>{{product.unit_id}}</td>
                                        <td>{{product.unit_quantity}}</td>
                                        {% for stocks in prod_stock %}
                                            {% if stocks.fk_product_id == product.id %}
                                                <td>{{stocks.product_price}}</td>
                                                <td>{{stocks.product_offer_price}}</td>
                                                <td>{{stocks.product_purchase_price}}</td>
                                                <td>{{stocks.opening_stock}}</td>
                                                <td>{{stocks.min_stock}}</td>
                                                <td>{{stocks.max_stock}}</td>
                                            {% endif %}
                                        {% endfor %}
                                        <td>
                                            <a href="{{url_for('editProduct', id=product.id, name=product.product_name_en)}}" class="btn btn-warning" style="font-size: x-small; width: fit-content;">Edit</a>
                                            <a href="{{url_for('deleteProduct', id=product.id)}}" class="btn btn-danger" style="font-size: x-small; width: fit-content;">Delete</a>
                                        </td>
                                    </tr>
                                    {% endfor %}
                                   
                                    
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            
        </div>
    
</div>


{% endblock %}


